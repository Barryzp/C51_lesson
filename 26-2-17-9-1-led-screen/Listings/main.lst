C51 COMPILER V9.54   MAIN                                                                  02/17/2026 22:46:56 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: F:\program_files\C51V5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\L
                    -istings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "delay.h"
   3          
   4          sbit RCK = P3^5; // 74HC595 RCLK pin (latch pin)
   5          sbit SCK = P3^6; // 74HC595 SRCLK pin (shift clock pin)
   6          sbit SER = P3^4; // 74HC595 SER pin (serial data input pin)
   7          
   8          // æ¼”ç¤ºå¦‚ä½•å°†ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®å†™å…¥74HC595ç§»ä½å¯„å­˜å™¨
   9          void test_write_byte_74595(unsigned char byte) {
  10   1          SER&=0x80; //å–ç¬¬8ä½æ•°æ®ï¼Œå¹¶å°†SERçš„å…¶ä»–ä½æ¸…é›¶ï¼Œé0å³1
  11   1          SCK = 1; //ä¸Šå‡æ²¿å°†æ•°æ®ç§»å…¥74HC595çš„ç§»ä½å¯„å­˜å™¨
  12   1          SCK = 0; //ä¸‹é™æ²¿å‡†å¤‡ä¸‹ä¸€ä½æ•°æ®çš„è¾“å…¥
  13   1      
  14   1          // ç»§ç»­ç§»æ¬¡é«˜ä½å°±æ˜¯ç¬¬7ä½æ•°æ®ï¼Œä¾æ¬¡ç±»æ¨
  15   1          SER&=0x40; //å–ç¬¬7ä½æ•°æ®ï¼Œå¹¶å°†SERçš„å…¶ä»–ä½æ¸…é›¶ï¼Œé0å³1
  16   1          SCK = 1; //ä¸Šå‡æ²¿å°†æ•°æ®ç§»å…¥74HC595çš„ç§»ä½å¯„å­˜å™¨
  17   1          SCK = 0; //ä¸‹é™æ²¿å‡†å¤‡ä¸‹ä¸€ä½æ•°æ®çš„è¾“å…¥
  18   1      
  19   1          // ç»§ç»­ç§»æ¬¡é«˜ä½å°±æ˜¯ç¬¬6ä½æ•°æ®ï¼Œä¾æ¬¡ç±»æ¨
  20   1          // ... 
  21   1      }
*** WARNING C280 IN LINE 9 OF main.c: 'byte': unreferenced local variable
  22          
  23          void write_byte_74595(unsigned char byte) {
  24   1          unsigned char i;
  25   1          for (i = 0; i < 8; i++) {
  26   2              SER = (byte >> (7 - i)) & 0x01; // å–å½“å‰ä½æ•°æ®ï¼Œå¹¶å°†SERçš„å…¶ä»–ä½æ¸…é›¶ï¼Œé0å³1ï¼Œä
             -»£ç ç­‰ä»·äºSER = (byte & (0x80 >> i)) ? 1 : 0;
  27   2              SCK = 1; // ä¸Šå‡æ²¿å°†æ•°æ®ç§»å…¥74HC595çš„ç§»ä½å¯„å­˜å™¨
  28   2              SCK = 0; // ä¸‹é™æ²¿å‡†å¤‡ä¸‹ä¸€ä½æ•°æ®çš„è¾“å…¥
  29   2          }
  30   1          RCK = 1; // é”å­˜æ•°æ®åˆ°è¾“å‡ºç«¯
  31   1          RCK = 0; // å‡†å¤‡ä¸‹ä¸€æ¬¡æ•°æ®è¾“å…¥
  32   1      }
  33          
  34          void matrix_led_show_column(unsigned char column, unsigned char byte){
  35   1          write_byte_74595(byte); // å°†è¡Œæ•°æ®å†™å…¥74HC595, dataæ˜¯å…³é”®å­—ï¼Œä¸èƒ½ç”¨ä½œå˜é‡å
  36   1          P0 = ~(0x80 >> column); // é€‰æ‹©å½“å‰åˆ—ï¼Œå…¶ä»–åˆ—ä¿æŒé«˜ç”µå¹³,å› ä¸º74HC595çš„è¾“å‡ºæ˜¯ä½ç”µå
             -¹³æœ‰æ•ˆ
  37   1      
  38   1          delay_for_ms(1); // å»¶æ—¶ï¼Œä¿æŒæ˜¾ç¤ºç¨³å®š
  39   1          P0 = 0xFF; // æ¸…é™¤æ˜¾ç¤ºï¼Œå‡†å¤‡ä¸‹ä¸€æ¬¡æ˜¾ç¤º
  40   1      }
  41          
  42          void main() {
  43   1      
  44   1          SCK = 0; // Initialize shift clock to low
  45   1          RCK = 0; // Initialize latch clock to low
  46   1      
  47   1          // matrix_led_show_column(7, 0xaa); // Example: Show pattern 0xAA on column 0
  48   1      
  49   1          while (1) {
  50   2              // region æ˜¾ç¤ºä¸€ä¸ªç®€å•çš„æ–œçº¿
  51   2              // matrix_led_show_column(0, 0x01); // Show pattern 0x01 on column 0
C51 COMPILER V9.54   MAIN                                                                  02/17/2026 22:46:56 PAGE 2   

  52   2              // matrix_led_show_column(1, 0x02); // Show pattern 0x 02 on column 1
  53   2              // matrix_led_show_column(2, 0x04); // Show pattern 0x
  54   2              // matrix_led_show_column(3, 0x08); // Show pattern 0x08 on column 3
  55   2              // matrix_led_show_column(4, 0x10); // Show pattern 0x
  56   2              // matrix_led_show_column(5, 0x20); // Show pattern 0x20 on column 5
  57   2              // matrix_led_show_column(6, 0x40); // Show pattern 0x40 on column 6
  58   2              // matrix_led_show_column(7, 0x80); // Show pattern 0x
  59   2              // endregion
  60   2      
  61   2              // æ˜¾ç¤ºä¸€ä¸ªç¬‘è„¸
  62   2              matrix_led_show_column(0, 0x3C); // Show pattern 0x3C on column 0
  63   2              matrix_led_show_column(1, 0x42); // Show pattern 0x42 on column 1
  64   2              matrix_led_show_column(2, 0xA5); // Show pattern 0xA5 on column 2
  65   2              matrix_led_show_column(3, 0x81); // Show pattern 0x
  66   2              matrix_led_show_column(4, 0xA5); // Show pattern 0xA5 on column 4
  67   2              matrix_led_show_column(5, 0x99); // Show pattern 0x
  68   2              matrix_led_show_column(6, 0x42); // Show pattern 0x42 on column 6
  69   2              matrix_led_show_column(7, 0x3C); // Show pattern 0x3C on column 7
  70   2          }
  71   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    154    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
