C51 COMPILER V9.54   MAIN                                                                  01/25/2026 10:53:29 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: F:\program_files\C51V5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\L
                    -istings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include <INTRINS.H>
   3          #include "LCD1602.h"
   4          #include "independent_key.h"
   5          
   6          void timer0_init(void) // 1000å¾®ç§’@11.0592MHz
   7          {
   8   1          // AUXR |= 0x80;    //å®šæ—¶å™¨æ—¶é’Ÿ1Tæ¨¡å¼
   9   1          TMOD &= 0xF0; // è®¾ç½®å®šæ—¶å™¨æ¨¡å¼
  10   1          TL0 = 0xCD;   // è®¾ç½®å®šæ—¶åˆå€¼
  11   1          TH0 = 0xD4;   // è®¾ç½®å®šæ—¶åˆå€¼
  12   1          TF0 = 0;      // æ¸…é™¤TF0æ ‡å¿—
  13   1          TR0 = 1;      // å®šæ—¶å™¨0å¼€å§‹è®¡æ—¶
  14   1      
  15   1          // ä¸­æ–­è®¾ç½®
  16   1          ET0 = 1; // ä½¿èƒ½å®šæ—¶å™¨0ä¸­æ–­
  17   1          EA = 1;  // ä½¿èƒ½æ€»ä¸­æ–­
  18   1      
  19   1          // é…ç½®ä¼˜å…ˆçº§ï¼Œç›®å‰åªæœ‰ä¸€ä¸ªä¸­æ–­æºå¯ä»¥ä¸å†™ï¼Œé»˜è®¤æœ€ä½Žçº§0ï¼Œä¸ºäº†å®Œæ•´è¿˜æ˜¯å†
             -™ä¸Š
  20   1          PT0 = 0; // å®šæ—¶å™¨0ä¸­æ–­ä¼˜å…ˆçº§ä½Ž
  21   1      }
  22          
  23          static unsigned int led_mod = 0;
  24          
  25          void main()
  26          {
  27   1          P2 = 0xFE;
  28   1          timer0_init(); // åˆå§‹åŒ–å®šæ—¶å™¨0
  29   1      
  30   1          while (1)
  31   1          {
  32   2              unsigned char key_value = independent_key_scan();
  33   2              if (key_value != 0)
  34   2              {
  35   3                  if (key_value == 1)
  36   3                  {
  37   4                      led_mod = 0;
  38   4                  }
  39   3                  else if (key_value == 2)
  40   3                  {
  41   4                      led_mod = 1;
  42   4                  }
  43   3              }
  44   2          }
  45   1      }
  46          
  47          void timer0_isr(void) interrupt 1
  48          {
  49   1          static unsigned int t_count = 0;
  50   1      
  51   1          // é‡æ–°è£…è½½å®šæ—¶åˆå€¼
  52   1          TL0 = 0xCD; // è®¾ç½®å®šæ—¶åˆå€¼
  53   1          TH0 = 0xD4; // è®¾ç½®å®šæ—¶åˆå€¼
C51 COMPILER V9.54   MAIN                                                                  01/25/2026 10:53:29 PAGE 2   

  54   1      
  55   1          t_count++;
  56   1          if (t_count >= 500) // 500msåˆ°è¾¾
  57   1          {
  58   2              t_count = 0;
  59   2              if (led_mod == 1)
  60   2              {
  61   3                  P2 = _crol_(P2, 1);
  62   3              }
  63   2              else if (led_mod == 0)
  64   2              {
  65   3                  P2 = _cror_(P2, 1);
  66   3              }
  67   2          }
  68   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    149    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
