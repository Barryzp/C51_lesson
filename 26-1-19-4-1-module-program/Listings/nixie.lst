C51 COMPILER V9.54   NIXIE                                                                 01/19/2026 17:30:15 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE NIXIE
OBJECT MODULE PLACED IN .\Objects\nixie.obj
COMPILER INVOKED BY: F:\program_files\C51V5\C51\BIN\C51.EXE nixie.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\
                    -Listings\nixie.lst) TABS(2) OBJECT(.\Objects\nixie.obj)

line level    source

   1          #include "nixie.h"
   2          
   3          void num0_display(){
   4   1          // ��ʾ0����a,b,c,d,e,fλ��0011 1111
   5   1          P0 = 0x3F;
   6   1      }
   7          
   8          void num1_display(){
   9   1          // ��ʾ1����b, cλ��0000 0110
  10   1          P0 = 0x06;
  11   1      }
  12          
  13          void num2_display(){
  14   1          // ��ʾ2����a,b,g,e,gλ��0101 1011
  15   1          P0 = 0x5B;
  16   1      }
  17          
  18          void num3_display(){
  19   1          // ��ʾ3����a,b,c,d,g,λ��0100 1111
  20   1          P0 = 0x4F;
  21   1      }
  22          
  23          void num4_display(){
  24   1          // ��ʾ4����b,c,f,gλ��0110 0110
  25   1          P0 = 0x66;
  26   1      }
  27          
  28          void num5_display(){
  29   1          // ��ʾ5����a,c,d,f,gλ��0110 1101
  30   1          P0 = 0x6D;
  31   1      }
  32          
  33          void num6_display(){
  34   1          // ��ʾ6����a,c,d,e,f,gλ��0111 1101
  35   1          P0 = 0x7D;
  36   1      }
  37          
  38          void num7_display(){
  39   1          // ��ʾ7����a,b,cλ��0000 0111
  40   1          P0 = 0x07;
  41   1      }
  42          
  43          void num8_display(){
  44   1          // ��ʾ8����a,b,c,d,e,f,gλ��0111 1111
  45   1          P0 = 0x7F;
  46   1      }
  47          
  48          void num9_display(){
  49   1          // ��ʾ9����a,b,c,d,f,gλ��0110 1111
  50   1          P0 = 0x6F;
  51   1      }
  52          
  53          void show_num_unit(unsigned char num){
  54   1          if(num == 0){
C51 COMPILER V9.54   NIXIE                                                                 01/19/2026 17:30:15 PAGE 2   

  55   2            num0_display();
  56   2          }else if(num == 1){
  57   2            num1_display();
  58   2          }else if(num == 2){
  59   2            num2_display();
  60   2          }else if(num == 3){
  61   2            num3_display();
  62   2          }else if(num == 4){
  63   2            num4_display();
  64   2          }else if(num == 5){
  65   2            num5_display();
  66   2          }else if(num == 6){
  67   2            num6_display();
  68   2          }else if(num == 7){
  69   2            num7_display();
  70   2          }else if(num == 8){
  71   2            num8_display();
  72   2          }else if(num == 9){
  73   2            num9_display();
  74   2          }
  75   1      }
  76          
  77          void show_led_1(){
  78   1          P2_4 = 0;
  79   1          P2_3 = 0;
  80   1          P2_2 = 0;
  81   1      }
  82          
  83          void show_led_2(){
  84   1          P2_4 = 0;
  85   1          P2_3 = 0;
  86   1          P2_2 = 1;
  87   1      }
  88          
  89          void show_led_3(){
  90   1          P2_4 = 0;
  91   1          P2_3 = 1;
  92   1          P2_2 = 0;
  93   1      }
  94          
  95          void show_led_4(){
  96   1          P2_4 = 0;
  97   1          P2_3 = 1;
  98   1          P2_2 = 1;
  99   1      }
 100          
 101          void show_led_5(){
 102   1          P2_4 = 1;
 103   1          P2_3 = 0;
 104   1          P2_2 = 0;
 105   1      }
 106          
 107          void show_led_6(){
 108   1          P2_4 = 1;
 109   1          P2_3 = 0;
 110   1          P2_2 = 1;
 111   1      }
 112          void show_led_7(){
 113   1          P2_4 = 1;
 114   1          P2_3 = 1;
 115   1          P2_2 = 0;
 116   1      }
C51 COMPILER V9.54   NIXIE                                                                 01/19/2026 17:30:15 PAGE 3   

 117          
 118          void show_led_8(){
 119   1          P2_4 = 1;
 120   1          P2_3 = 1;
 121   1          P2_2 = 1;
 122   1      }
 123          
 124          void choose_num_pos(unsigned char pos){
 125   1        if(pos == 1){
 126   2          show_led_1();
 127   2        }else if(pos == 2){
 128   2          show_led_2();
 129   2        }else if(pos == 3){
 130   2          show_led_3();
 131   2        }else if(pos == 4){
 132   2          show_led_4();
 133   2        }else if(pos == 5){
 134   2          show_led_5();
 135   2        }else if(pos == 6){
 136   2          show_led_6();
 137   2        }else if(pos == 7){
 138   2          show_led_7();
 139   2        }else if(pos == 8){
 140   2          show_led_8();
 141   2        }
 142   1      }
 143          
 144          void show_pos_num(unsigned char pos, unsigned char num){
 145   1        choose_num_pos(pos);
 146   1        show_num_unit(num);
 147   1        delay1ms();   // 增加显示时间
 148   1        
 149   1        P0=0x00;    // 每位都要清空，防止显示混乱
 150   1      }
 151          
 152          unsigned char get_number_digits(unsigned long number){
 153   1        unsigned char count = 0;
 154   1        if(number == 0) return 0;
 155   1        
 156   1        while(number != 0){
 157   2          number = number / 10;
 158   2          count++;
 159   2        }
 160   1        return count;
 161   1      }
 162          
 163          void show_num_range(unsigned long number){
 164   1        
 165   1        unsigned char digit_num = get_number_digits(number);
 166   1        unsigned long integer = 0;
 167   1        unsigned long number_temp = 0;
 168   1        unsigned char remainder = 0;
 169   1        unsigned char i = 0;
 170   1        unsigned char j = 0;
 171   1        
 172   1        if(digit_num == 0) return;
 173   1        
 174   1        // 扫描10次每一位数字，让人眼能看清每一位
 175   1        for(j = 0; j < 10; j++){
 176   2          number_temp = number;
 177   2          for(i=0; i<digit_num; i++){
 178   3            remainder = number_temp % 10;
C51 COMPILER V9.54   NIXIE                                                                 01/19/2026 17:30:15 PAGE 4   

 179   3            integer = number_temp / 10;
 180   3            number_temp = integer;
 181   3            show_pos_num(i+1, remainder);
 182   3          }
 183   2        }
 184   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    447    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      21
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
